document.addEventListener("DOMContentLoaded",M=>{gsap.registerPlugin(Draggable);function q(){const r=document.querySelector('[data-slider="list"]');console.log(r);const n=gsap.utils.toArray('[data-slider="slide"]'),P=document.querySelector('[data-slider="button-next"]'),v=document.querySelector('[data-slider="button-prev"]'),t=document.querySelector('[data-slide-count="total"]'),i=document.querySelector('[data-slide-count="step"]'),x=i.parentElement;let c;const l=n.length;t.textContent=l<10?`0${l}`:l,x.innerHTML="",n.forEach((u,d)=>{const p=i.cloneNode(!0);p.textContent=d+1<10?`0${d+1}`:d+1,x.appendChild(p)});const b=x.querySelectorAll('[data-slide-count="step"]'),g=W(n,{paused:!0,draggable:!0,center:!1,onChange:(u,d)=>{c&&c.classList.remove("active");const p=u.nextElementSibling||n[0];p.classList.add("active"),c=p,gsap.to(b,{y:`${-100*d}%`,ease:"power3",duration:.45})}});n.forEach((u,d)=>u.addEventListener("click",()=>g.toIndex(d-1,{ease:"power3",duration:.725}))),P.addEventListener("click",()=>g.next({ease:"power3",duration:.725})),v.addEventListener("click",()=>g.previous({ease:"power3",duration:.725}))}function W(r,n){r=gsap.utils.toArray(r),n=n||{},gsap.context(()=>{let P=n.onChange,v=0,t=gsap.timeline({repeat:n.repeat,onUpdate:P&&function(){let e=t.closestIndex();v!==e&&(v=e,P(r[e],e))},paused:n.paused,defaults:{ease:"none"},onReverseComplete:()=>t.totalTime(t.rawTime()+t.duration()*100)}),i=r.length,x=r[0].offsetLeft,c=[],l=[],b=[],g=[],u=0,d=n.center,p=(n.speed||1)*100,E=n.snap===!1?e=>e:gsap.utils.snap(n.snap||1),w=0,L=d===!0?r[0].parentNode:gsap.utils.toArray(d)[0]||r[0].parentNode,h,B=()=>r[i-1].offsetLeft+g[i-1]/100*l[i-1]-x+b[0]+r[i-1].offsetWidth*gsap.getProperty(r[i-1],"scaleX")+(parseFloat(n.paddingRight)||0),S=()=>{let e=L.getBoundingClientRect(),a;r.forEach((o,s)=>{l[s]=parseFloat(gsap.getProperty(o,"width","px")),g[s]=E(parseFloat(gsap.getProperty(o,"x","px"))/l[s]*100+gsap.getProperty(o,"xPercent")),a=o.getBoundingClientRect(),b[s]=a.left-(s?e.right:e.left),e=a}),gsap.set(r,{xPercent:o=>g[o]}),h=B()},m,C=()=>{w=d?t.duration()*(L.offsetWidth/2)/h:0,d&&c.forEach((e,a)=>{c[a]=m(t.labels["label"+a]+t.duration()*l[a]/2/h-w)})},I=(e,a,o)=>{let s=e.length,f=1e10,R=0,y;for(;s--;)y=Math.abs(e[s]-a),y>o/2&&(y=o-y),y<f&&(f=y,R=s);return R},T=()=>{let e,a,o,s,f;for(t.clear(),e=0;e<i;e++)a=r[e],o=g[e]/100*l[e],s=a.offsetLeft+o-x+b[0],f=s+l[e]*gsap.getProperty(a,"scaleX"),t.to(a,{xPercent:E((o-f)/l[e]*100),duration:f/p},0).fromTo(a,{xPercent:E((o-f+h)/l[e]*100)},{xPercent:g[e],duration:(o-f+h-o)/p,immediateRender:!1},f/p).add("label"+e,s/p),c[e]=s/p;m=gsap.utils.wrap(0,t.duration())},k=e=>{let a=t.progress();t.progress(0,!0),S(),T(),C(),t.draggable?t.time(c[u],!0):t.progress(a,!0)},A=()=>k();gsap.set(r,{x:0}),S(),T(),C(),window.addEventListener("resize",A),Draggable.create(wrapper,{type:"x",bounds:L,edgeResistance:.65,onDrag:function(){let e=this.x/h;t.progress(e)},onThrowUpdate:function(){let e=this.x/h;t.progress(e)},onRelease:function(){t.play()}});function D(e,a){Math.abs(e-u)>i/2?u=I(c,e,h):u=e,t.seek(c[u],!0),t.play()}return{toIndex:D}})}q()});
